{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"D:/Programmation/D\\xE9veloppement web/React/react-entertainment-hub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Programmation/D\\xE9veloppement web/React/react-entertainment-hub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Programmation/D\\xE9veloppement web/React/react-entertainment-hub/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Modal from\"@material-ui/core/Modal\";import Backdrop from\"@material-ui/core/Backdrop\";import Fade from\"@material-ui/core/Fade\";import axios from\"axios\";import{img_500,unavailable,unavailableLandscape}from\"../../config/config\";import\"./ContentModal.css\";import{Button}from\"@material-ui/core\";import YouTubeIcon from\"@material-ui/icons/YouTube\";import Carousel from\"../Carousel/Carousel\";var useStyles=makeStyles(function(theme){return{modal:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},paper:{width:\"90%\",height:\"80%\",backgroundColor:\"#39445a\",border:\"1px solid #282c34\",borderRadius:10,color:\"white\",boxShadow:theme.shadows[5],padding:theme.spacing(1,1,3)}};});export default function TransitionsModal(_ref){var children=_ref.children,media_type=_ref.media_type,id=_ref.id;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),video=_useState6[0],setVideo=_useState6[1];var handleOpen=function handleOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://api.themoviedb.org/3/\".concat(media_type,\"/\").concat(id,\"?api_key=\").concat(process.env.REACT_APP_API_KEY,\"&language=en-US\"));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setContent(data);// console.log(data);\ncase 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();var fetchVideo=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _data$results$;var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"https://api.themoviedb.org/3/\".concat(media_type,\"/\").concat(id,\"/videos?api_key=\").concat(process.env.REACT_APP_API_KEY,\"&language=en-US\"));case 2:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setVideo((_data$results$=data.results[0])===null||_data$results$===void 0?void 0:_data$results$.key);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchVideo(){return _ref3.apply(this,arguments);};}();useEffect(function(){fetchData();fetchVideo();// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"media\",style:{cursor:\"pointer\"},color:\"inherit\",onClick:handleOpen,children:children}),/*#__PURE__*/_jsx(Modal,{\"aria-labelledby\":\"transition-modal-title\",\"aria-describedby\":\"transition-modal-description\",className:classes.modal,open:open,onClose:handleClose,closeAfterTransition:true,BackdropComponent:Backdrop,BackdropProps:{timeout:500},children:/*#__PURE__*/_jsx(Fade,{in:open,children:content&&/*#__PURE__*/_jsx(\"div\",{className:classes.paper,children:/*#__PURE__*/_jsxs(\"div\",{className:\"ContentModal\",children:[/*#__PURE__*/_jsx(\"img\",{src:content.poster_path?\"\".concat(img_500,\"/\").concat(content.poster_path):unavailable,alt:content.name||content.title,className:\"ContentModal__portrait\"}),/*#__PURE__*/_jsx(\"img\",{src:content.backdrop_path?\"\".concat(img_500,\"/\").concat(content.backdrop_path):unavailableLandscape,alt:content.name||content.title,className:\"ContentModal__landscape\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ContentModal__about\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"ContentModal__title\",children:[content.name||content.title,\" (\",(content.first_air_date||content.release_date||\"-----\").substring(0,4),\")\"]}),content.tagline&&/*#__PURE__*/_jsx(\"i\",{className:\"tagline\",children:content.tagline}),/*#__PURE__*/_jsx(\"span\",{className:\"ContentModal__description\",children:content.overview}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Carousel,{id:id,media_type:media_type})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(YouTubeIcon,{}),color:\"secondary\",target:\"__blank\",href:\"https://www.youtube.com/watch?v=\".concat(video),children:\"Watch the Trailer\"})]})]})})})})]});}","map":{"version":3,"sources":["D:/Programmation/DÃ©veloppement web/React/react-entertainment-hub/src/components/ContentModal/ContentModal.js"],"names":["React","useEffect","useState","makeStyles","Modal","Backdrop","Fade","axios","img_500","unavailable","unavailableLandscape","Button","YouTubeIcon","Carousel","useStyles","theme","modal","display","alignItems","justifyContent","paper","width","height","backgroundColor","border","borderRadius","color","boxShadow","shadows","padding","spacing","TransitionsModal","children","media_type","id","classes","open","setOpen","content","setContent","video","setVideo","handleOpen","handleClose","fetchData","get","process","env","REACT_APP_API_KEY","data","fetchVideo","results","key","cursor","timeout","poster_path","name","title","backdrop_path","first_air_date","release_date","substring","tagline","overview"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport Backdrop from \"@material-ui/core/Backdrop\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\nimport axios from \"axios\";\r\nimport {\r\n  img_500,\r\n  unavailable,\r\n  unavailableLandscape,\r\n} from \"../../config/config\";\r\nimport \"./ContentModal.css\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport YouTubeIcon from \"@material-ui/icons/YouTube\";\r\nimport Carousel from \"../Carousel/Carousel\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  modal: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  },\r\n  paper: {\r\n    width: \"90%\",\r\n    height: \"80%\",\r\n    backgroundColor: \"#39445a\",\r\n    border: \"1px solid #282c34\",\r\n    borderRadius: 10,\r\n    color: \"white\",\r\n    boxShadow: theme.shadows[5],\r\n    padding: theme.spacing(1, 1, 3),\r\n  },\r\n}));\r\n\r\nexport default function TransitionsModal({ children, media_type, id }) {\r\n  const classes = useStyles();\r\n  const [open, setOpen] = useState(false);\r\n  const [content, setContent] = useState();\r\n  const [video, setVideo] = useState();\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const fetchData = async () => {\r\n    const { data } = await axios.get(\r\n      `https://api.themoviedb.org/3/${media_type}/${id}?api_key=${process.env.REACT_APP_API_KEY}&language=en-US`\r\n    );\r\n\r\n    setContent(data);\r\n    // console.log(data);\r\n  };\r\n\r\n  const fetchVideo = async () => {\r\n    const { data } = await axios.get(\r\n      `https://api.themoviedb.org/3/${media_type}/${id}/videos?api_key=${process.env.REACT_APP_API_KEY}&language=en-US`\r\n    );\r\n\r\n    setVideo(data.results[0]?.key);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    fetchVideo();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"media\"\r\n        style={{ cursor: \"pointer\" }}\r\n        color=\"inherit\"\r\n        onClick={handleOpen}\r\n      >\r\n        {children}\r\n      </div>\r\n      <Modal\r\n        aria-labelledby=\"transition-modal-title\"\r\n        aria-describedby=\"transition-modal-description\"\r\n        className={classes.modal}\r\n        open={open}\r\n        onClose={handleClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n          timeout: 500,\r\n        }}\r\n      >\r\n        <Fade in={open}>\r\n          {content && (\r\n            <div className={classes.paper}>\r\n              <div className=\"ContentModal\">\r\n                <img\r\n                  src={\r\n                    content.poster_path\r\n                      ? `${img_500}/${content.poster_path}`\r\n                      : unavailable\r\n                  }\r\n                  alt={content.name || content.title}\r\n                  className=\"ContentModal__portrait\"\r\n                />\r\n                <img\r\n                  src={\r\n                    content.backdrop_path\r\n                      ? `${img_500}/${content.backdrop_path}`\r\n                      : unavailableLandscape\r\n                  }\r\n                  alt={content.name || content.title}\r\n                  className=\"ContentModal__landscape\"\r\n                />\r\n                <div className=\"ContentModal__about\">\r\n                  <span className=\"ContentModal__title\">\r\n                    {content.name || content.title} (\r\n                    {(\r\n                      content.first_air_date ||\r\n                      content.release_date ||\r\n                      \"-----\"\r\n                    ).substring(0, 4)}\r\n                    )\r\n                  </span>\r\n                  {content.tagline && (\r\n                    <i className=\"tagline\">{content.tagline}</i>\r\n                  )}\r\n\r\n                  <span className=\"ContentModal__description\">\r\n                    {content.overview}\r\n                  </span>\r\n\r\n                  <div>\r\n                    <Carousel id={id} media_type={media_type} />\r\n                  </div>\r\n\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<YouTubeIcon />}\r\n                    color=\"secondary\"\r\n                    target=\"__blank\"\r\n                    href={`https://www.youtube.com/watch?v=${video}`}\r\n                  >\r\n                    Watch the Trailer\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Fade>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}